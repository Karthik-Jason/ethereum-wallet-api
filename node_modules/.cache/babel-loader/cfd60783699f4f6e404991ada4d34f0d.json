{"remainingRequest":"/home/karthik/Desktop/myetherwallet/ethereum-wallet-api/node_modules/babel-loader/lib/index.js!/home/karthik/Desktop/myetherwallet/ethereum-wallet-api/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/karthik/Desktop/myetherwallet/ethereum-wallet-api/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/karthik/Desktop/myetherwallet/ethereum-wallet-api/src/components/VerifyMessageInput/VerifyMessageInput.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/karthik/Desktop/myetherwallet/ethereum-wallet-api/src/components/VerifyMessageInput/VerifyMessageInput.vue","mtime":1574664278270},{"path":"/home/karthik/Desktop/myetherwallet/ethereum-wallet-api/node_modules/cache-loader/dist/cjs.js","mtime":1574664275186},{"path":"/home/karthik/Desktop/myetherwallet/ethereum-wallet-api/node_modules/babel-loader/lib/index.js","mtime":1574664275010},{"path":"/home/karthik/Desktop/myetherwallet/ethereum-wallet-api/node_modules/cache-loader/dist/cjs.js","mtime":1574664275186},{"path":"/home/karthik/Desktop/myetherwallet/ethereum-wallet-api/node_modules/vue-loader/lib/index.js","mtime":1574664277774}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport _defineProperty from \"/home/karthik/Desktop/myetherwallet/ethereum-wallet-api/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Toast } from '@/helpers';\nimport { mapState } from 'vuex';\nimport { toBuffer, hashPersonalMessage, ecrecover, pubToAddress } from 'ethereumjs-util';\nexport default {\n  props: {\n    signature: {\n      type: String,\n      default: ''\n    }\n  },\n  data: function data() {\n    return {\n      message: this.signature,\n      showMessage: false\n    };\n  },\n  computed: _objectSpread({}, mapState(['web3'])),\n  watch: {\n    message: function message(newVal) {\n      this.message = newVal;\n    },\n    signature: function signature(newVal) {\n      this.message = newVal;\n    }\n  },\n  methods: {\n    copyToClipboard: function copyToClipboard() {\n      this.$refs.signature.select();\n      document.execCommand('copy');\n      window.getSelection().removeAllRanges();\n    },\n    deleteInput: function deleteInput() {\n      this.showMessage = false;\n      this.message = '';\n    },\n    verifyMessage: function verifyMessage() {\n      try {\n        var json = JSON.parse(this.message);\n        var hash = hashPersonalMessage(toBuffer(json.msg));\n        var sig = Buffer.from(json.sig.replace('0x', ''), 'hex');\n\n        if (sig.length !== 65) {\n          Toast.responseHandler('Something went wrong!', Toast.ERROR);\n          return;\n        }\n\n        sig[64] = sig[64] === 0 || sig[64] === 1 ? sig[64] + 27 : sig[64];\n\n        if (json.version === '1') {\n          hash = this.web3.utils.sha3(json.msg);\n        }\n\n        var pubKey = ecrecover(hash, sig[64], sig.slice(0, 32), sig.slice(32, 64));\n\n        if (json.address.replace('0x', '') !== pubToAddress(pubKey).toString('hex')) {\n          this.showMessage = false;\n          Toast.responseHandler('Signer address is different from the derived address!', Toast.ERROR);\n        } else {\n          this.showMessage = true;\n        }\n      } catch (e) {\n        Toast.responseHandler(e, Toast.ERROR);\n      }\n    }\n  }\n};",{"version":3,"sources":["VerifyMessageInput.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA,SAAA,KAAA,QAAA,WAAA;AACA,SAAA,QAAA,QAAA,MAAA;AACA,SACA,QADA,EAEA,mBAFA,EAGA,SAHA,EAIA,YAJA,QAKA,iBALA;AAOA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,SAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AADA,GADA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KAAA,SADA;AAEA,MAAA,WAAA,EAAA;AAFA,KAAA;AAIA,GAZA;AAaA,EAAA,QAAA,oBACA,QAAA,CAAA,CAAA,MAAA,CAAA,CADA,CAbA;AAgBA,EAAA,KAAA,EAAA;AACA,IAAA,OADA,mBACA,MADA,EACA;AACA,WAAA,OAAA,GAAA,MAAA;AACA,KAHA;AAIA,IAAA,SAJA,qBAIA,MAJA,EAIA;AACA,WAAA,OAAA,GAAA,MAAA;AACA;AANA,GAhBA;AAwBA,EAAA,OAAA,EAAA;AACA,IAAA,eADA,6BACA;AACA,WAAA,KAAA,CAAA,SAAA,CAAA,MAAA;AACA,MAAA,QAAA,CAAA,WAAA,CAAA,MAAA;AACA,MAAA,MAAA,CAAA,YAAA,GAAA,eAAA;AACA,KALA;AAMA,IAAA,WANA,yBAMA;AACA,WAAA,WAAA,GAAA,KAAA;AACA,WAAA,OAAA,GAAA,EAAA;AACA,KATA;AAUA,IAAA,aAVA,2BAUA;AACA,UAAA;AACA,YAAA,IAAA,GAAA,IAAA,CAAA,KAAA,CAAA,KAAA,OAAA,CAAA;AACA,YAAA,IAAA,GAAA,mBAAA,CAAA,QAAA,CAAA,IAAA,CAAA,GAAA,CAAA,CAAA;AACA,YAAA,GAAA,GAAA,MAAA,CAAA,IAAA,CAAA,IAAA,CAAA,GAAA,CAAA,OAAA,CAAA,IAAA,EAAA,EAAA,CAAA,EAAA,KAAA,CAAA;;AACA,YAAA,GAAA,CAAA,MAAA,KAAA,EAAA,EAAA;AACA,UAAA,KAAA,CAAA,eAAA,CAAA,uBAAA,EAAA,KAAA,CAAA,KAAA;AACA;AACA;;AACA,QAAA,GAAA,CAAA,EAAA,CAAA,GAAA,GAAA,CAAA,EAAA,CAAA,KAAA,CAAA,IAAA,GAAA,CAAA,EAAA,CAAA,KAAA,CAAA,GAAA,GAAA,CAAA,EAAA,CAAA,GAAA,EAAA,GAAA,GAAA,CAAA,EAAA,CAAA;;AACA,YAAA,IAAA,CAAA,OAAA,KAAA,GAAA,EAAA;AACA,UAAA,IAAA,GAAA,KAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AACA;;AACA,YAAA,MAAA,GAAA,SAAA,CACA,IADA,EAEA,GAAA,CAAA,EAAA,CAFA,EAGA,GAAA,CAAA,KAAA,CAAA,CAAA,EAAA,EAAA,CAHA,EAIA,GAAA,CAAA,KAAA,CAAA,EAAA,EAAA,EAAA,CAJA,CAAA;;AAMA,YACA,IAAA,CAAA,OAAA,CAAA,OAAA,CAAA,IAAA,EAAA,EAAA,MACA,YAAA,CAAA,MAAA,CAAA,CAAA,QAAA,CAAA,KAAA,CAFA,EAGA;AACA,eAAA,WAAA,GAAA,KAAA;AACA,UAAA,KAAA,CAAA,eAAA,CACA,uDADA,EAEA,KAAA,CAAA,KAFA;AAIA,SATA,MASA;AACA,eAAA,WAAA,GAAA,IAAA;AACA;AACA,OA9BA,CA8BA,OAAA,CAAA,EAAA;AACA,QAAA,KAAA,CAAA,eAAA,CAAA,CAAA,EAAA,KAAA,CAAA,KAAA;AACA;AACA;AA5CA;AAxBA,CAAA","sourcesContent":["<template>\n  <div class=\"verify-content-container\">\n    <div class=\"send-form\">\n      <div class=\"title-container\">\n        <div class=\"title\">\n          <h4>Signature:</h4>\n          <div class=\"copy-buttons\">\n            <span @click=\"deleteInput\">{{ $t('common.clear') }}</span>\n            <span @click=\"copyToClipboard\">{{ $t('common.copy') }}</span>\n          </div>\n        </div>\n      </div>\n      <div class=\"the-form signature\">\n        <textarea\n          v-validate=\"'required'\"\n          ref=\"signature\"\n          v-model=\"message\"\n          name=\"signature\"\n          class=\"custom-textarea-1\"\n        />\n      </div>\n      <div>\n        <p\n          v-if=\"message !== '' && showMessage === true\"\n          class=\"success-message\"\n        >\n          {{ JSON.parse(message).address }}\n          {{ $t('interface.verifiedMessage') }}:\n          <br v-if=\"JSON.parse(message).msg.length > 20\" />\n          <b>{{ JSON.parse(message).msg }}</b>\n        </p>\n        <p v-if=\"errors.has('signature')\">{{ errors.first('signature') }}</p>\n      </div>\n    </div>\n\n    <div class=\"submit-button-container\">\n      <div class=\"buttons\">\n        <button\n          :class=\"[\n            errors.has('signature') || message === '' ? 'disabled' : '',\n            'submit-button large-round-button-green-filled clickable'\n          ]\"\n          @click=\"verifyMessage\"\n        >\n          {{ $t('common.verifyMessage') }}\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Toast } from '@/helpers';\nimport { mapState } from 'vuex';\nimport {\n  toBuffer,\n  hashPersonalMessage,\n  ecrecover,\n  pubToAddress\n} from 'ethereumjs-util';\n\nexport default {\n  props: {\n    signature: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      message: this.signature,\n      showMessage: false\n    };\n  },\n  computed: {\n    ...mapState(['web3'])\n  },\n  watch: {\n    message(newVal) {\n      this.message = newVal;\n    },\n    signature(newVal) {\n      this.message = newVal;\n    }\n  },\n  methods: {\n    copyToClipboard() {\n      this.$refs.signature.select();\n      document.execCommand('copy');\n      window.getSelection().removeAllRanges();\n    },\n    deleteInput() {\n      this.showMessage = false;\n      this.message = '';\n    },\n    verifyMessage() {\n      try {\n        const json = JSON.parse(this.message);\n        let hash = hashPersonalMessage(toBuffer(json.msg));\n        const sig = Buffer.from(json.sig.replace('0x', ''), 'hex');\n        if (sig.length !== 65) {\n          Toast.responseHandler('Something went wrong!', Toast.ERROR);\n          return;\n        }\n        sig[64] = sig[64] === 0 || sig[64] === 1 ? sig[64] + 27 : sig[64];\n        if (json.version === '1') {\n          hash = this.web3.utils.sha3(json.msg);\n        }\n        const pubKey = ecrecover(\n          hash,\n          sig[64],\n          sig.slice(0, 32),\n          sig.slice(32, 64)\n        );\n        if (\n          json.address.replace('0x', '') !==\n          pubToAddress(pubKey).toString('hex')\n        ) {\n          this.showMessage = false;\n          Toast.responseHandler(\n            'Signer address is different from the derived address!',\n            Toast.ERROR\n          );\n        } else {\n          this.showMessage = true;\n        }\n      } catch (e) {\n        Toast.responseHandler(e, Toast.ERROR);\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import 'VerifyMessageInput.scss';\n</style>\n"],"sourceRoot":"src/components/VerifyMessageInput"}]}