{"remainingRequest":"/home/karthik/Desktop/myetherwallet/MyEtherWallet/node_modules/babel-loader/lib/index.js!/home/karthik/Desktop/myetherwallet/MyEtherWallet/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/karthik/Desktop/myetherwallet/MyEtherWallet/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/karthik/Desktop/myetherwallet/MyEtherWallet/src/layouts/InterfaceLayout/containers/SwapContainer/SwapContainer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/karthik/Desktop/myetherwallet/MyEtherWallet/src/layouts/InterfaceLayout/containers/SwapContainer/SwapContainer.vue","mtime":1573477612052},{"path":"/home/karthik/Desktop/myetherwallet/MyEtherWallet/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/karthik/Desktop/myetherwallet/MyEtherWallet/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/karthik/Desktop/myetherwallet/MyEtherWallet/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/karthik/Desktop/myetherwallet/MyEtherWallet/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/karthik/Desktop/myetherwallet/MyEtherWallet/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport _toConsumableArray from \"/home/karthik/Desktop/myetherwallet/MyEtherWallet/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.array.find\";\nimport _defineProperty from \"/home/karthik/Desktop/myetherwallet/MyEtherWallet/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.function.name\";\n\nvar _watch;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport BigNumber from 'bignumber.js';\nimport debug from 'debug';\nimport { mapState } from 'vuex';\nimport { Toast } from '@/helpers';\nimport ProvidersRadioSelector from \"./components/ProvidersRadioSelector\";\nimport DropDownAddressSelector from \"./components/SwapAddressSelector\";\nimport InterfaceBottomText from '@/components/InterfaceBottomText';\nimport InterfaceContainerTitle from \"../../components/InterfaceContainerTitle\";\nimport swapIcon from '@/assets/images/icons/swap-widget.svg';\nimport ImageKybernetowrk from '@/assets/images/etc/kybernetwork.png';\nimport ImageBity from '@/assets/images/etc/bity.png';\nimport ImageVisaMaster from '@/assets/images/etc/visamaster.png';\nimport SwapCurrencyPicker from \"./components/SwapCurrencyPicker\";\nimport SwapConfirmationModal from \"./components/SwapConfirmationModal\";\nimport SwapExitToFiat from \"./components/SwapExitToFiat\";\nimport SwapSendToModal from \"./components/SwapSendToModal\";\nimport { SwapProviders, providers, bestProviderForQuantity, bestRateForQuantity, isValidEntry, providerNames, supportedProviders, BASE_CURRENCY, fiat, MIN_SWAP_AMOUNT, ERC20 } from '@/partners';\nvar errorLogger = debug('v5:swapContainer');\nimport SwapSendForm from \"./components/SwapExitToFiat\";\nexport default {\n  components: {\n    'interface-bottom-text': InterfaceBottomText,\n    'interface-container-title': InterfaceContainerTitle,\n    'swap-currency-picker': SwapCurrencyPicker,\n    'drop-down-address-selector': DropDownAddressSelector,\n    'providers-radio-selector': ProvidersRadioSelector,\n    'swap-confirmation-modal': SwapConfirmationModal,\n    'swap-exit-to-fiat': SwapExitToFiat,\n    'swap-send-form': SwapSendForm,\n    'swap-send-to-modal': SwapSendToModal\n  },\n  props: {\n    tokensWithBalance: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  data: function data() {\n    return {\n      baseCurrency: BASE_CURRENCY,\n      providerSelectedName: '',\n      toAddress: '',\n      currentAddress: '',\n      refundAddress: '',\n      exitFromAddress: '',\n      fromCurrency: 'ETH',\n      toCurrency: 'ETH',\n      displayToValue: 1,\n      displayFromValue: 1,\n      fromValue: 1,\n      toValue: 1,\n      invalidFrom: 'none',\n      lastBestRate: 0,\n      selectedProvider: {},\n      swapDetails: {},\n      currencyDetails: {},\n      swap: new SwapProviders(providers, {\n        network: this.$store.state.network.type.name,\n        web3: this.$store.state.web3,\n        getRateForUnit: false\n      }, {\n        tokensWithBalance: this.tokensWithBalance\n      }),\n      images: {\n        kybernetowrk: ImageKybernetowrk,\n        bity: ImageBity,\n        visaMaster: ImageVisaMaster,\n        swap: swapIcon\n      },\n      toArray: [],\n      fromArray: [],\n      providerData: [],\n      tokenBalances: {},\n      providerRatesRecieved: [],\n      noProvidersPair: {},\n      providersFound: [],\n      tempStatuses: [],\n      overrideFrom: {},\n      overrideTo: {},\n      providerNames: providerNames,\n      supportedProviders: supportedProviders,\n      fiatCurrenciesArray: fiat.map(function (entry) {\n        return entry.symbol;\n      }),\n      finalizingSwap: false,\n      validAddress: true,\n      validRefundAddress: true,\n      validExitAddress: true,\n      ratesRetrived: false,\n      issueRecievingRates: false,\n      loadingData: true,\n      haveProviderRates: false,\n      loadingError: false,\n      switchCurrencyOrder: false,\n      bityExitToFiat: false,\n      exitToFiatCallback: function exitToFiatCallback() {},\n      debounceUpdateEstimate: {},\n      debounceDoThing: {},\n      unableToValidate: false,\n      unableToValidateExit: false,\n      unableToValidateRefund: false\n    };\n  },\n  computed: _objectSpread({}, mapState(['account', 'ens', 'gasPrice', 'web3', 'network']), {\n    bestRate: function bestRate() {\n      var _this = this;\n\n      try {\n        if (this.providerData.length > 0) {\n          if (this.selectedProvider.provider) {\n            return this.providerList.find(function (entry) {\n              return entry.provider === _this.selectedProvider.provider;\n            }).rate;\n          }\n\n          return bestRateForQuantity(_toConsumableArray(this.providerList), this.fromValue);\n        }\n\n        return this.lastBestRate;\n      } catch (e) {\n        errorLogger(e);\n      }\n    },\n    fromBelowMinAllowed: function fromBelowMinAllowed() {\n      if (new BigNumber(MIN_SWAP_AMOUNT).gt(new BigNumber(this.fromValue))) return \"\".concat(this.$t('interface.belowMin'), \" \").concat(MIN_SWAP_AMOUNT);\n      if (new BigNumber(this.selectedProvider.minValue).gt(new BigNumber(this.fromValue))) return this.$t('interface.belowMin', {\n        value: this.selectedProvider.maxValue,\n        currency: this.fromCurrency\n      });\n      return false;\n    },\n    fromAboveMaxAllowed: function fromAboveMaxAllowed() {\n      if (this.selectedProvider.provider === this.providerNames.bity) {\n        if (this.checkBityMax) {\n          return this.$t('interface.aboveMax', {\n            value: this.selectedProvider.maxValue,\n            currency: this.fromCurrency\n          });\n        }\n\n        return false;\n      } else if (new BigNumber(this.fromValue).gt(new BigNumber(this.selectedProvider.maxValue)) && new BigNumber(this.selectedProvider.maxValue).gt(new BigNumber(0))) return this.$t('interface.aboveMaxSwap', {\n        value: this.selectedProvider.maxValue,\n        currency: this.fromCurrency\n      });\n\n      return false;\n    },\n    toBelowMinAllowed: function toBelowMinAllowed() {\n      if (new BigNumber(0).gte(new BigNumber(this.toValue))) return this.$t('interface.belowMinGeneral');\n      return false;\n    },\n    toAboveMaxAllowed: function toAboveMaxAllowed() {\n      if (this.checkBityMax) return this.$t('interface.aboveMaxGeneral');\n      return false;\n    },\n    providerList: function providerList() {\n      if (this.providerData.length > 0) {\n        return bestProviderForQuantity(_toConsumableArray(this.providerData), this.fromValue);\n      }\n\n      return [];\n    },\n    isExitToFiat: function isExitToFiat() {\n      return this.fiatCurrenciesArray.includes(this.toCurrency);\n    },\n    validSwap: function validSwap() {\n      // initial chack.  will provide an alert on the next screen if no address is provided\n      var canExit = this.isExitToFiat && this.fromCurrency !== this.baseCurrency ? this.exitFromAddress !== '' : true;\n      return this.hasEnough && (this.toAddress !== '' || canExit) && this.allAddressesValid && this.selectedProvider.minValue <= +this.fromValue && (+this.fromValue <= this.selectedProvider.maxValue || this.selectedProvider.maxValue === 0);\n    },\n    checkBityMax: function checkBityMax() {\n      if (this.swap.isProvider(this.providerNames.bity)) {\n        return !this.swap.getProvider(this.providerNames.bity).maxCheck(this.fromCurrency, this.fromValue, this.toCurrency, this.toValue) && this.selectedProvider.provider === this.providerNames.bity;\n      }\n\n      return false;\n    },\n    showRefundAddress: function showRefundAddress() {\n      return !SwapProviders.isToken(this.fromCurrency) && this.selectedProvider.provider === this.providerNames.changelly;\n    },\n    allAddressesValid: function allAddressesValid() {\n      var validBaseToAddress = this.toAddress !== '' && this.validAddress;\n\n      if (this.isExitToFiat) {\n        if (this.fromCurrency === this.baseCurrency) {\n          return true;\n        }\n\n        return this.exitFromAddress !== '' && this.validExitAddress;\n      }\n\n      if (this.showRefundAddress) {\n        if (this.fromCurrency === this.baseCurrency || SwapProviders.isToken(this.fromCurrency)) {\n          var validRefundAddress = this.refundAddress === '' && this.validRefundAddress;\n          return validBaseToAddress && validRefundAddress;\n        }\n\n        return SwapProviders.checkAddress(this.refundAddress, this.fromCurrency);\n      }\n\n      return validBaseToAddress;\n    },\n    hasEnough: function hasEnough() {\n      return this.swap.hasEnough(this.fromCurrency, this.fromValue, this.baseCurrency, this.tokenBalances, this.account.balance);\n    },\n    exitSourceAddress: function exitSourceAddress() {\n      return this.isExitToFiat && this.fromCurrency === this.baseCurrency ? this.currentAddress : this.exitFromAddress;\n    }\n  }),\n  watch: (_watch = {}, _defineProperty(_watch, 'this.network.type.name', function thisNetworkTypeName() {\n    this.swap.updateNetwork(this.network.type.name);\n  }), _defineProperty(_watch, 'swap.updateProviderRates', function swapUpdateProviderRates() {\n    var _this$swap$initialCur = this.swap.initialCurrencyLists,\n        toArray = _this$swap$initialCur.toArray,\n        fromArray = _this$swap$initialCur.fromArray;\n    this.toArray = toArray;\n    this.fromArray = fromArray;\n  }), _defineProperty(_watch, 'swap.haveProviderRates', function swapHaveProviderRates() {\n    this.haveProviderRates = this.swap.ratesRetrieved;\n\n    var _this$swap$buildIniti = this.swap.buildInitialCurrencyArrays(),\n        toArray = _this$swap$buildIniti.toArray,\n        fromArray = _this$swap$buildIniti.fromArray;\n\n    this.toArray = toArray;\n    this.fromArray = fromArray;\n    this.lastBestRate = bestRateForQuantity(_toConsumableArray(this.providerList), this.fromValue);\n    this.updateRateEstimate(this.fromCurrency, this.toCurrency, this.fromValue, 'from');\n  }), _defineProperty(_watch, \"network\", function network(newVal) {\n    this.providerData = [];\n    this.haveProviderRates = false;\n    this.loadingData = false;\n    this.swap = new SwapProviders(providers, {\n      network: newVal.type.name,\n      web3: this.web3\n    });\n  }), _watch),\n  mounted: function mounted() {\n    var _this$swap$initialCur2 = this.swap.initialCurrencyLists,\n        toArray = _this$swap$initialCur2.toArray,\n        fromArray = _this$swap$initialCur2.fromArray;\n    this.toArray = toArray;\n    this.fromArray = fromArray;\n    this.currentAddress = this.account.address;\n    this.debounceUpdateEstimate = this.web3.utils._.debounce(this.updateEstimate, 300);\n    this.debounceReviseRateEstimate = this.web3.utils._.debounce(this.updateRateEstimate, 2000);\n  },\n  methods: {\n    reset: function reset() {\n      this.updateRateEstimate(this.fromCurrency, this.toCurrency, this.fromValue, 'from');\n      this.finalizingSwap = false;\n      this.validAddress = true;\n      this.issueRecievingRates = false;\n      this.loadingError = false;\n      this.switchCurrencyOrder = false;\n      this.bityExitToFiat = false;\n    },\n    flipCurrencies: function flipCurrencies() {\n      this.providerSelectedName = '';\n      this.switchCurrencyOrder = true;\n      var origTo = this.toValue;\n      this.fromCurrency = this.currencyDetails.to.symbol;\n      this.toCurrency = this.currencyDetails.from.symbol;\n      this.overrideFrom = this.currencyDetails.to;\n      this.overrideTo = this.currencyDetails.from;\n      this.updateRateEstimate(this.fromCurrency, this.toCurrency, origTo, 'from');\n      this.switchCurrencyOrder = false;\n    },\n    setSelectedProvider: function setSelectedProvider(provider) {\n      this.selectedProvider = this.providerList.find(function (entry) {\n        return entry.provider === provider;\n      });\n      this.providerSelectedName = this.selectedProvider.provider;\n      this.updateEstimate('from');\n    },\n    setToAddress: function setToAddress(address) {\n      this.toAddress = address;\n    },\n    setRefundAddress: function setRefundAddress(address) {\n      this.refundAddress = address;\n    },\n    setExitFromAddress: function setExitFromAddress(address) {\n      this.exitFromAddress = address;\n    },\n    swapAll: function swapAll() {\n      this.fromValue = this.swap.convertToTokenBase(this.fromCurrency, this.tokenBalances[this.fromCurrency]);\n      this.amountChanged('from');\n    },\n    setFromCurrency: function setFromCurrency(value) {\n      var dir = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'from';\n      this.providerSelectedName = '';\n      this.currencyDetails.from = value;\n      this.fromCurrency = value.symbol;\n      this.getBalance(this.fromCurrency);\n      this.toArray = this.swap.setToCurrencyBuilder(value);\n      this.updateRateEstimate(this.fromCurrency, this.toCurrency, this.fromValue, dir);\n    },\n    setToCurrency: function setToCurrency(value) {\n      var dir = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'to';\n      this.providerSelectedName = '';\n      this.currencyDetails.to = value;\n      this.toCurrency = value.symbol;\n      this.fromArray = this.swap.setFromCurrencyBuilder(value);\n      this.updateRateEstimate(this.fromCurrency, this.toCurrency, this.fromValue, dir);\n    },\n    getBalance: function () {\n      var _getBalance = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(currency) {\n        var balance;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(SwapProviders.isToken(currency) && currency !== this.baseCurrency)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                _context.next = 3;\n                return new this.web3.eth.Contract(ERC20, this.swap.getTokenAddress(currency)).methods.balanceOf(this.currentAddress).call();\n\n              case 3:\n                balance = _context.sent;\n                this.$set(this.tokenBalances, currency, balance);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getBalance(_x) {\n        return _getBalance.apply(this, arguments);\n      }\n\n      return getBalance;\n    }(),\n    amountChanged: function amountChanged(direction) {\n      if (isValidEntry(this.fromValue) && direction === 'from' || isValidEntry(this.toValue) && direction === 'to') {\n        if (this.swap.getProvider(this.providerNames.simplex).currencies.fiat[this.fromCurrency]) {\n          this.debounceUpdateEstimate(this.providerNames.simplex + direction);\n        } else {\n          this.debounceUpdateEstimate(direction);\n          var fromCur = this.fromCurrency;\n          var toCur = this.toCurrency;\n          var fromVal = this.fromValue;\n          this.debounceReviseRateEstimate(fromCur, toCur, fromVal, direction);\n        }\n      }\n    },\n    updateEstimate: function () {\n      var _updateEstimate = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2(input) {\n        var fromValue, toValue, simplexProvider, simplexRateDetails, rate, _rate;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!this.simplexUpdate) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                this.simplexUpdate = false;\n                return _context2.abrupt(\"return\");\n\n              case 3:\n                _context2.t0 = input;\n                _context2.next = _context2.t0 === 'to' ? 6 : _context2.t0 === 'from' ? 8 : _context2.t0 === \"\".concat(this.providerNames.simplex, \"to\") ? 10 : _context2.t0 === \"\".concat(this.providerNames.simplex, \"from\") ? 26 : 42;\n                break;\n\n              case 6:\n                this.fromValue = this.swap.calculateFromValue(this.toValue, this.bestRate, this.fromCurrency);\n                return _context2.abrupt(\"break\", 47);\n\n              case 8:\n                this.toValue = this.swap.calculateToValue(this.fromValue, this.bestRate, this.toCurrency);\n                return _context2.abrupt(\"break\", 47);\n\n              case 10:\n                this.simplexUpdate = true;\n                simplexProvider = this.swap.getProvider(this.providerNames.simplex);\n\n                if (!simplexProvider.canQuote(this.fromValue, this.toValue)) {\n                  _context2.next = 20;\n                  break;\n                }\n\n                _context2.next = 15;\n                return simplexProvider.updateDigital(this.fromCurrency, this.toCurrency, this.toValue);\n\n              case 15:\n                simplexRateDetails = _context2.sent;\n                this.fromValue = simplexRateDetails.fromValue;\n                this.toValue = simplexRateDetails.toValue;\n                _context2.next = 25;\n                break;\n\n              case 20:\n                _context2.next = 22;\n                return simplexProvider.updateFiat(this.fromCurrency, this.toCurrency, 51);\n\n              case 22:\n                simplexRateDetails = _context2.sent;\n                rate = new BigNumber(simplexRateDetails.toValue).div(simplexRateDetails.fromValue).toString(10);\n                this.fromValue = this.swap.calculateFromValue(this.toValue, rate, this.fromCurrency);\n\n              case 25:\n                return _context2.abrupt(\"break\", 47);\n\n              case 26:\n                this.simplexUpdate = true;\n                simplexProvider = this.swap.getProvider(this.providerNames.simplex);\n\n                if (!simplexProvider.canQuote(this.fromValue, this.toValue)) {\n                  _context2.next = 36;\n                  break;\n                }\n\n                _context2.next = 31;\n                return simplexProvider.updateFiat(this.fromCurrency, this.toCurrency, this.fromValue);\n\n              case 31:\n                simplexRateDetails = _context2.sent;\n                this.fromValue = simplexRateDetails.fromValue;\n                this.toValue = simplexRateDetails.toValue;\n                _context2.next = 41;\n                break;\n\n              case 36:\n                _context2.next = 38;\n                return simplexProvider.updateFiat(this.fromCurrency, this.toCurrency, 51);\n\n              case 38:\n                simplexRateDetails = _context2.sent;\n                _rate = new BigNumber(simplexRateDetails.toValue).div(simplexRateDetails.fromValue).toString(10);\n                this.toValue = this.swap.calculateToValue(this.fromValue, _rate);\n\n              case 41:\n                return _context2.abrupt(\"break\", 47);\n\n              case 42:\n                toValue = this.swap.calculateToValue(this.fromValue, this.bestRate);\n                fromValue = this.swap.calculateFromValue(this.toValue, this.bestRate);\n                this.toValue = toValue;\n                this.fromValue = fromValue;\n                return _context2.abrupt(\"break\", 47);\n\n              case 47:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function updateEstimate(_x2) {\n        return _updateEstimate.apply(this, arguments);\n      }\n\n      return updateEstimate;\n    }(),\n    updateRateEstimate: function () {\n      var _updateRateEstimate = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(fromCurrency, toCurrency, fromValue, to) {\n        var _this2 = this;\n\n        var _ref, providersFound, callsToMake, results;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!this.haveProviderRates) {\n                  _context3.next = 16;\n                  break;\n                }\n\n                this.loadingData = true;\n                this.noProvidersPair = {\n                  fromCurrency: fromCurrency,\n                  toCurrency: toCurrency\n                };\n                this.selectedProvider = {}; // Reset the selected provider when new rate pair is choosen\n\n                this.providerData = [];\n                _context3.next = 7;\n                return this.swap.updateRateEstimate(fromCurrency, toCurrency, fromValue, this.toValue);\n\n              case 7:\n                _ref = _context3.sent;\n                providersFound = _ref.providersFound;\n                callsToMake = _ref.callsToMake;\n                this.providersFound = providersFound;\n                _context3.next = 13;\n                return Promise.all(callsToMake.map(function (func) {\n                  return func(fromCurrency, toCurrency, fromValue, _this2.toValue);\n                }));\n\n              case 13:\n                results = _context3.sent;\n                this.loadingData = false;\n\n                if (results.every(function (entry) {\n                  return entry.fromCurrency === _this2.fromCurrency && entry.toCurrency === _this2.toCurrency;\n                })) {\n                  this.providerData = bestProviderForQuantity(results.map(function (entry) {\n                    if (+entry.rate > 0) {\n                      return {\n                        provider: entry.provider,\n                        fromCurrency: fromCurrency,\n                        fromValue: _this2.fromValue,\n                        toCurrency: toCurrency,\n                        rate: +entry.rate,\n                        minValue: entry.minValue || 0,\n                        maxValue: entry.maxValue || 0,\n                        computeConversion: function computeConversion(_fromValue) {\n                          return new BigNumber(_fromValue).times(this.rate).toFixed(6).toString(10);\n                        }\n                      };\n                    } else if (entry.provider === _this2.providerNames.changelly) {\n                      Toast.responseHandler(\"Failed to retrieve Changelly rate from \".concat(fromCurrency, \" to \").concat(toCurrency), 3);\n                    }\n                  }), fromValue);\n                  this.updateEstimate(to);\n                }\n\n              case 16:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function updateRateEstimate(_x3, _x4, _x5, _x6) {\n        return _updateRateEstimate.apply(this, arguments);\n      }\n\n      return updateRateEstimate;\n    }(),\n    swapConfirmationModalOpen: function () {\n      var _swapConfirmationModalOpen = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4() {\n        var _this3 = this;\n\n        var providerDetails, swapDetails;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n\n                if (!this.validSwap) {\n                  _context4.next = 10;\n                  break;\n                }\n\n                this.finalizingSwap = true;\n                providerDetails = this.providerList.find(function (entry) {\n                  return entry.provider === _this3.selectedProvider.provider;\n                });\n                swapDetails = {\n                  providerDetails: providerDetails,\n                  fromValue: this.fromValue,\n                  toValue: this.toValue,\n                  toAddress: this.toAddress || this.currentAddress,\n                  fromAddress: this.currentAddress,\n                  refundAddress: SwapProviders.isToken(providerDetails.fromCurrency) ? this.currentAddress : this.refundAddress,\n                  exitFromAddress: this.isExitToFiat && this.fromCurrency === this.baseCurrency ? this.currentAddress : this.exitFromAddress\n                };\n                _context4.next = 7;\n                return this.swap.startSwap(swapDetails);\n\n              case 7:\n                this.swapDetails = _context4.sent;\n                this.finalizingSwap = false;\n\n                if (this.swapDetails.isExitToFiat) {\n                  this.bityExitToFiat = true;\n\n                  this.exitToFiatCallback = function (swapDetailsExit) {\n                    _this3.bityExitToFiat = false;\n                    _this3.swapDetails = swapDetailsExit;\n\n                    _this3.openConfirmModal(_this3.swapDetails);\n                  };\n                } else {\n                  this.openConfirmModal(this.swapDetails);\n                }\n\n              case 10:\n                _context4.next = 22;\n                break;\n\n              case 12:\n                _context4.prev = 12;\n                _context4.t0 = _context4[\"catch\"](0);\n\n                if (!(_context4.t0.message === 'abort')) {\n                  _context4.next = 17;\n                  break;\n                }\n\n                this.finalizingSwap = false;\n                return _context4.abrupt(\"return\");\n\n              case 17:\n                this.$refs.swapConfirmation.$refs.swapconfirmation.hide();\n                this.$refs.swapSendTo.$refs.swapconfirmation.hide();\n                this.finalizingSwap = false;\n                errorLogger(_context4.t0);\n                Toast.responseHandler(_context4.t0, false);\n\n              case 22:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 12]]);\n      }));\n\n      function swapConfirmationModalOpen() {\n        return _swapConfirmationModalOpen.apply(this, arguments);\n      }\n\n      return swapConfirmationModalOpen;\n    }(),\n    openConfirmModal: function openConfirmModal(swapDetails) {\n      if (swapDetails.dataForInitialization && swapDetails.maybeToken) {\n        this.$refs.swapConfirmation.$refs.swapconfirmation.show();\n      } else if (swapDetails.dataForInitialization && !swapDetails.maybeToken) {\n        this.$refs.swapSendTo.$refs.swapconfirmation.show();\n      } else {\n        throw Error('Error while requesting finalized details from provider');\n      }\n    },\n    exitToFiatAbort: function exitToFiatAbort() {\n      // get any component state values to temporarily persist, and reset swap state to state before exit to fiat selected.\n      this.bityExitToFiat = !this.bityExitToFiat;\n    },\n    resetSwapState: function resetSwapState() {\n      this.reset();\n    }\n  }\n};",{"version":3,"sources":["SwapContainer.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"swap-container\">\n    <div v-show=\"!bityExitToFiat\">\n      <swap-confirmation-modal\n        ref=\"swapConfirmation\"\n        :selected-provider=\"selectedProvider\"\n        :swap-details=\"swapDetails\"\n        :current-address=\"currentAddress\"\n        @swapStarted=\"resetSwapState\"\n      />\n\n      <swap-send-to-modal\n        ref=\"swapSendTo\"\n        :selected-provider=\"selectedProvider\"\n        :swap-details=\"swapDetails\"\n        :current-address=\"currentAddress\"\n        @swapStarted=\"resetSwapState\"\n      />\n\n      <div class=\"title-block\">\n        <interface-container-title :title=\"$t('common.swap')\" />\n      </div>\n\n      <div class=\"form-content-container\">\n        <div class=\"send-form\">\n          <div class=\"form-block amount-to-address\">\n            <div class=\"amount\">\n              <div class=\"title title-and-copy\">\n                <h4>{{ $t('common.from') }}</h4>\n                <p\n                  v-if=\"tokenBalances[fromCurrency] > 0\"\n                  class=\"all-button prevent-user-select\"\n                  @click=\"swapAll\"\n                >\n                  {{ $t('common.totalBalance') }}\n                </p>\n              </div>\n              <swap-currency-picker\n                :currencies=\"fromArray\"\n                :override-currency=\"overrideFrom\"\n                :from-source=\"true\"\n                page=\"SwapContainerFrom\"\n                @selectedCurrency=\"setFromCurrency\"\n              />\n              <div class=\"the-form amount-number\">\n                <input\n                  v-model=\"fromValue\"\n                  type=\"number\"\n                  name\n                  value\n                  step=\"any\"\n                  placeholder=\"Deposit Amount\"\n                  @input=\"amountChanged('from')\"\n                />\n              </div>\n              <div class=\"error-message-container\">\n                <p v-if=\"fromBelowMinAllowed\">{{ fromBelowMinAllowed }}</p>\n                <p v-if=\"!hasEnough && !fromBelowMinAllowed\">\n                  {{ $t('common.dontHaveEnough') }}\n                </p>\n                <p v-if=\"fromAboveMaxAllowed\">{{ fromAboveMaxAllowed }}</p>\n              </div>\n            </div>\n            <div class=\"exchange-icon\" @click=\"flipCurrencies\">\n              <img :src=\"images.swap\" alt />\n            </div>\n            <div class=\"amount\">\n              <div class=\"title\">\n                <h4>{{ $t('common.to') }}</h4>\n              </div>\n              <swap-currency-picker\n                :currencies=\"toArray\"\n                :override-currency=\"overrideTo\"\n                :from-source=\"false\"\n                page=\"SwapContainerTo\"\n                @selectedCurrency=\"setToCurrency\"\n              />\n              <div class=\"the-form amount-number\">\n                <input\n                  v-model=\"toValue\"\n                  type=\"number\"\n                  name\n                  value\n                  step=\"any\"\n                  placeholder=\"Received Amount\"\n                  @input=\"amountChanged('to')\"\n                />\n              </div>\n              <div class=\"error-message-container\">\n                <p v-if=\"toBelowMinAllowed\">{{ toBelowMinAllowed }}</p>\n                <p v-if=\"toAboveMaxAllowed\">{{ toAboveMaxAllowed }}</p>\n              </div>\n            </div>\n          </div>\n          <!-- form-block amount-to-address -->\n        </div>\n\n        <div v-show=\"!isExitToFiat\" class=\"send-form\">\n          <div class=\"the-form gas-amount\">\n            <drop-down-address-selector\n              :currency=\"toCurrency\"\n              :current-address=\"currentAddress\"\n              :copybutton=\"true\"\n              :title=\"$t('common.toAddress')\"\n              @toAddress=\"setToAddress\"\n              @validAddress=\"validAddress = $event\"\n              @unableToValidate=\"unableToValidate = $event\"\n            />\n          </div>\n        </div>\n\n        <div\n          v-show=\"isExitToFiat && fromCurrency !== baseCurrency\"\n          class=\"send-form\"\n        >\n          <div class=\"the-form gas-amount\">\n            <drop-down-address-selector\n              :currency=\"fromCurrency\"\n              :current-address=\"currentAddress\"\n              :copybutton=\"true\"\n              :title=\"$t('interface.fromAddr')\"\n              @toAddress=\"setExitFromAddress\"\n              @validAddress=\"validExitAddress = $event\"\n              @unableToValidate=\"unableToValidateExit = $event\"\n            />\n          </div>\n        </div>\n\n        <div v-show=\"showRefundAddress\" class=\"send-form\">\n          <div class=\"the-form gas-amount\">\n            <drop-down-address-selector\n              :currency=\"fromCurrency\"\n              :current-address=\"currentAddress\"\n              :copybutton=\"true\"\n              :title=\"$t('interface.refund', { currency: fromCurrency })\"\n              @toAddress=\"setRefundAddress\"\n              @validAddress=\"validRefundAddress = $event\"\n              @unableToValidate=\"unableToValidateRefund = $event\"\n            />\n          </div>\n        </div>\n\n        <div class=\"send-form\">\n          <div class=\"title-container\">\n            <div class=\"title title-and-copy\">\n              <h4>{{ $t('interface.providers') }}</h4>\n            </div>\n          </div>\n          <providers-radio-selector\n            :loading-provider-error=\"loadingError\"\n            :loading-provider-rates=\"!haveProviderRates\"\n            :provider-data=\"providerList\"\n            :from-value=\"+fromValue\"\n            :to-value=\"+toValue\"\n            :no-providers-pair=\"noProvidersPair\"\n            :loading-data=\"loadingData\"\n            :providers-found=\"providersFound\"\n            :provider-selected=\"selectedProvider\"\n            :switch-currency-order=\"switchCurrencyOrder\"\n            :all-supported-providers=\"supportedProviders\"\n            :provider-selected-name=\"providerSelectedName\"\n            @selectedProvider=\"setSelectedProvider\"\n          />\n        </div>\n\n        <div class=\"submit-button-container\">\n          <div\n            v-show=\"finalizingSwap\"\n            class=\"disabled submit-button large-round-button-green-filled clickable\"\n          >\n            <i class=\"fa fa-spinner fa-spin\" />\n            {{ $t('interface.swapButtonLoading') }}\n          </div>\n          <div\n            v-show=\"!finalizingSwap\"\n            :class=\"[\n              validSwap ? '' : 'disabled',\n              'submit-button large-round-button-green-filled clickable'\n            ]\"\n            @click=\"swapConfirmationModalOpen\"\n          >\n            {{ $t('common.continue') }}\n            <i class=\"fa fa-long-arrow-right\" aria-hidden=\"true\" />\n          </div>\n          <interface-bottom-text\n            :link-text=\"$t('interface.helpCenter')\"\n            :question=\"$t('interface.haveIssues')\"\n            link=\"https://kb.myetherwallet.com\"\n          />\n        </div>\n      </div>\n    </div>\n    <swap-exit-to-fiat\n      v-if=\"bityExitToFiat\"\n      :swap-details=\"swapDetails\"\n      :exit-from-address=\"exitSourceAddress\"\n      :exit-to-fiat-callback=\"exitToFiatCallback\"\n      @backButtonClick=\"exitToFiatAbort\"\n    ></swap-exit-to-fiat>\n  </div>\n</template>\n<script>\nimport BigNumber from 'bignumber.js';\nimport debug from 'debug';\nimport { mapState } from 'vuex';\n\nimport { Toast } from '@/helpers';\nimport ProvidersRadioSelector from './components/ProvidersRadioSelector';\nimport DropDownAddressSelector from './components/SwapAddressSelector';\nimport InterfaceBottomText from '@/components/InterfaceBottomText';\nimport InterfaceContainerTitle from '../../components/InterfaceContainerTitle';\nimport swapIcon from '@/assets/images/icons/swap-widget.svg';\nimport ImageKybernetowrk from '@/assets/images/etc/kybernetwork.png';\nimport ImageBity from '@/assets/images/etc/bity.png';\nimport ImageVisaMaster from '@/assets/images/etc/visamaster.png';\n\nimport SwapCurrencyPicker from './components/SwapCurrencyPicker';\nimport SwapConfirmationModal from './components/SwapConfirmationModal';\nimport SwapExitToFiat from './components/SwapExitToFiat';\nimport SwapSendToModal from './components/SwapSendToModal';\n\nimport {\n  SwapProviders,\n  providers,\n  bestProviderForQuantity,\n  bestRateForQuantity,\n  isValidEntry,\n  providerNames,\n  supportedProviders,\n  BASE_CURRENCY,\n  fiat,\n  MIN_SWAP_AMOUNT,\n  ERC20\n} from '@/partners';\n\nconst errorLogger = debug('v5:swapContainer');\nimport SwapSendForm from './components/SwapExitToFiat';\n\nexport default {\n  components: {\n    'interface-bottom-text': InterfaceBottomText,\n    'interface-container-title': InterfaceContainerTitle,\n    'swap-currency-picker': SwapCurrencyPicker,\n    'drop-down-address-selector': DropDownAddressSelector,\n    'providers-radio-selector': ProvidersRadioSelector,\n    'swap-confirmation-modal': SwapConfirmationModal,\n    'swap-exit-to-fiat': SwapExitToFiat,\n    'swap-send-form': SwapSendForm,\n    'swap-send-to-modal': SwapSendToModal\n  },\n  props: {\n    tokensWithBalance: {\n      type: Array,\n      default: function() {\n        return [];\n      }\n    }\n  },\n  data() {\n    return {\n      baseCurrency: BASE_CURRENCY,\n      providerSelectedName: '',\n      toAddress: '',\n      currentAddress: '',\n      refundAddress: '',\n      exitFromAddress: '',\n      fromCurrency: 'ETH',\n      toCurrency: 'ETH',\n      displayToValue: 1,\n      displayFromValue: 1,\n      fromValue: 1,\n      toValue: 1,\n      invalidFrom: 'none',\n      lastBestRate: 0,\n      selectedProvider: {},\n      swapDetails: {},\n      currencyDetails: {},\n      swap: new SwapProviders(\n        providers,\n        {\n          network: this.$store.state.network.type.name,\n          web3: this.$store.state.web3,\n          getRateForUnit: false\n        },\n        { tokensWithBalance: this.tokensWithBalance }\n      ),\n      images: {\n        kybernetowrk: ImageKybernetowrk,\n        bity: ImageBity,\n        visaMaster: ImageVisaMaster,\n        swap: swapIcon\n      },\n      toArray: [],\n      fromArray: [],\n      providerData: [],\n      tokenBalances: {},\n      providerRatesRecieved: [],\n      noProvidersPair: {},\n      providersFound: [],\n      tempStatuses: [],\n      overrideFrom: {},\n      overrideTo: {},\n      providerNames: providerNames,\n      supportedProviders: supportedProviders,\n      fiatCurrenciesArray: fiat.map(entry => entry.symbol),\n      finalizingSwap: false,\n      validAddress: true,\n      validRefundAddress: true,\n      validExitAddress: true,\n      ratesRetrived: false,\n      issueRecievingRates: false,\n      loadingData: true,\n      haveProviderRates: false,\n      loadingError: false,\n      switchCurrencyOrder: false,\n      bityExitToFiat: false,\n      exitToFiatCallback: () => {},\n      debounceUpdateEstimate: {},\n      debounceDoThing: {},\n      unableToValidate: false,\n      unableToValidateExit: false,\n      unableToValidateRefund: false\n    };\n  },\n  computed: {\n    ...mapState(['account', 'ens', 'gasPrice', 'web3', 'network']),\n    bestRate() {\n      try {\n        if (this.providerData.length > 0) {\n          if (this.selectedProvider.provider) {\n            return this.providerList.find(entry => {\n              return entry.provider === this.selectedProvider.provider;\n            }).rate;\n          }\n          return bestRateForQuantity([...this.providerList], this.fromValue);\n        }\n        return this.lastBestRate;\n      } catch (e) {\n        errorLogger(e);\n      }\n    },\n    fromBelowMinAllowed() {\n      if (new BigNumber(MIN_SWAP_AMOUNT).gt(new BigNumber(this.fromValue)))\n        return `${this.$t('interface.belowMin')} ${MIN_SWAP_AMOUNT}`;\n      if (\n        new BigNumber(this.selectedProvider.minValue).gt(\n          new BigNumber(this.fromValue)\n        )\n      )\n        return this.$t('interface.belowMin', {\n          value: this.selectedProvider.maxValue,\n          currency: this.fromCurrency\n        });\n      return false;\n    },\n    fromAboveMaxAllowed() {\n      if (this.selectedProvider.provider === this.providerNames.bity) {\n        if (this.checkBityMax) {\n          return this.$t('interface.aboveMax', {\n            value: this.selectedProvider.maxValue,\n            currency: this.fromCurrency\n          });\n        }\n        return false;\n      } else if (\n        new BigNumber(this.fromValue).gt(\n          new BigNumber(this.selectedProvider.maxValue)\n        ) &&\n        new BigNumber(this.selectedProvider.maxValue).gt(new BigNumber(0))\n      )\n        return this.$t('interface.aboveMaxSwap', {\n          value: this.selectedProvider.maxValue,\n          currency: this.fromCurrency\n        });\n      return false;\n    },\n    toBelowMinAllowed() {\n      if (new BigNumber(0).gte(new BigNumber(this.toValue)))\n        return this.$t('interface.belowMinGeneral');\n      return false;\n    },\n    toAboveMaxAllowed() {\n      if (this.checkBityMax) return this.$t('interface.aboveMaxGeneral');\n      return false;\n    },\n    providerList() {\n      if (this.providerData.length > 0) {\n        return bestProviderForQuantity([...this.providerData], this.fromValue);\n      }\n      return [];\n    },\n    isExitToFiat() {\n      return this.fiatCurrenciesArray.includes(this.toCurrency);\n    },\n    validSwap() {\n      // initial chack.  will provide an alert on the next screen if no address is provided\n      const canExit =\n        this.isExitToFiat && this.fromCurrency !== this.baseCurrency\n          ? this.exitFromAddress !== ''\n          : true;\n      return (\n        this.hasEnough &&\n        (this.toAddress !== '' || canExit) &&\n        this.allAddressesValid &&\n        this.selectedProvider.minValue <= +this.fromValue &&\n        (+this.fromValue <= this.selectedProvider.maxValue ||\n          this.selectedProvider.maxValue === 0)\n      );\n    },\n    checkBityMax() {\n      if (this.swap.isProvider(this.providerNames.bity)) {\n        return (\n          !this.swap\n            .getProvider(this.providerNames.bity)\n            .maxCheck(\n              this.fromCurrency,\n              this.fromValue,\n              this.toCurrency,\n              this.toValue\n            ) && this.selectedProvider.provider === this.providerNames.bity\n        );\n      }\n      return false;\n    },\n    showRefundAddress() {\n      return (\n        !SwapProviders.isToken(this.fromCurrency) &&\n        this.selectedProvider.provider === this.providerNames.changelly\n      );\n    },\n    allAddressesValid() {\n      const validBaseToAddress = this.toAddress !== '' && this.validAddress;\n\n      if (this.isExitToFiat) {\n        if (this.fromCurrency === this.baseCurrency) {\n          return true;\n        }\n        return this.exitFromAddress !== '' && this.validExitAddress;\n      }\n      if (this.showRefundAddress) {\n        if (\n          this.fromCurrency === this.baseCurrency ||\n          SwapProviders.isToken(this.fromCurrency)\n        ) {\n          const validRefundAddress =\n            this.refundAddress === '' && this.validRefundAddress;\n          return validBaseToAddress && validRefundAddress;\n        }\n        return SwapProviders.checkAddress(\n          this.refundAddress,\n          this.fromCurrency\n        );\n      }\n\n      return validBaseToAddress;\n    },\n    hasEnough() {\n      return this.swap.hasEnough(\n        this.fromCurrency,\n        this.fromValue,\n        this.baseCurrency,\n        this.tokenBalances,\n        this.account.balance\n      );\n    },\n    exitSourceAddress() {\n      return this.isExitToFiat && this.fromCurrency === this.baseCurrency\n        ? this.currentAddress\n        : this.exitFromAddress;\n    }\n  },\n  watch: {\n    ['this.network.type.name']() {\n      this.swap.updateNetwork(this.network.type.name);\n    },\n    ['swap.updateProviderRates']() {\n      const { toArray, fromArray } = this.swap.initialCurrencyLists;\n      this.toArray = toArray;\n      this.fromArray = fromArray;\n    },\n    ['swap.haveProviderRates']() {\n      this.haveProviderRates = this.swap.ratesRetrieved;\n      const { toArray, fromArray } = this.swap.buildInitialCurrencyArrays();\n      this.toArray = toArray;\n      this.fromArray = fromArray;\n      this.lastBestRate = bestRateForQuantity(\n        [...this.providerList],\n        this.fromValue\n      );\n      this.updateRateEstimate(\n        this.fromCurrency,\n        this.toCurrency,\n        this.fromValue,\n        'from'\n      );\n    },\n    network(newVal) {\n      this.providerData = [];\n      this.haveProviderRates = false;\n      this.loadingData = false;\n      this.swap = new SwapProviders(providers, {\n        network: newVal.type.name,\n        web3: this.web3\n      });\n    }\n  },\n  mounted() {\n    const { toArray, fromArray } = this.swap.initialCurrencyLists;\n    this.toArray = toArray;\n    this.fromArray = fromArray;\n    this.currentAddress = this.account.address;\n    this.debounceUpdateEstimate = this.web3.utils._.debounce(\n      this.updateEstimate,\n      300\n    );\n    this.debounceReviseRateEstimate = this.web3.utils._.debounce(\n      this.updateRateEstimate,\n      2000\n    );\n  },\n  methods: {\n    reset() {\n      this.updateRateEstimate(\n        this.fromCurrency,\n        this.toCurrency,\n        this.fromValue,\n        'from'\n      );\n      this.finalizingSwap = false;\n      this.validAddress = true;\n      this.issueRecievingRates = false;\n      this.loadingError = false;\n      this.switchCurrencyOrder = false;\n      this.bityExitToFiat = false;\n    },\n    flipCurrencies() {\n      this.providerSelectedName = '';\n      this.switchCurrencyOrder = true;\n      const origTo = this.toValue;\n      this.fromCurrency = this.currencyDetails.to.symbol;\n      this.toCurrency = this.currencyDetails.from.symbol;\n      this.overrideFrom = this.currencyDetails.to;\n      this.overrideTo = this.currencyDetails.from;\n      this.updateRateEstimate(\n        this.fromCurrency,\n        this.toCurrency,\n        origTo,\n        'from'\n      );\n      this.switchCurrencyOrder = false;\n    },\n    setSelectedProvider(provider) {\n      this.selectedProvider = this.providerList.find(entry => {\n        return entry.provider === provider;\n      });\n      this.providerSelectedName = this.selectedProvider.provider;\n      this.updateEstimate('from');\n    },\n    setToAddress(address) {\n      this.toAddress = address;\n    },\n    setRefundAddress(address) {\n      this.refundAddress = address;\n    },\n    setExitFromAddress(address) {\n      this.exitFromAddress = address;\n    },\n    swapAll() {\n      this.fromValue = this.swap.convertToTokenBase(\n        this.fromCurrency,\n        this.tokenBalances[this.fromCurrency]\n      );\n      this.amountChanged('from');\n    },\n    setFromCurrency(value, dir = 'from') {\n      this.providerSelectedName = '';\n      this.currencyDetails.from = value;\n      this.fromCurrency = value.symbol;\n      this.getBalance(this.fromCurrency);\n      this.toArray = this.swap.setToCurrencyBuilder(value);\n      this.updateRateEstimate(\n        this.fromCurrency,\n        this.toCurrency,\n        this.fromValue,\n        dir\n      );\n    },\n    setToCurrency(value, dir = 'to') {\n      this.providerSelectedName = '';\n      this.currencyDetails.to = value;\n      this.toCurrency = value.symbol;\n      this.fromArray = this.swap.setFromCurrencyBuilder(value);\n      this.updateRateEstimate(\n        this.fromCurrency,\n        this.toCurrency,\n        this.fromValue,\n        dir\n      );\n    },\n    async getBalance(currency) {\n      if (SwapProviders.isToken(currency) && currency !== this.baseCurrency) {\n        const balance = await new this.web3.eth.Contract(\n          ERC20,\n          this.swap.getTokenAddress(currency)\n        ).methods\n          .balanceOf(this.currentAddress)\n          .call();\n\n        this.$set(this.tokenBalances, currency, balance);\n      }\n    },\n    amountChanged(direction) {\n      if (\n        (isValidEntry(this.fromValue) && direction === 'from') ||\n        (isValidEntry(this.toValue) && direction === 'to')\n      ) {\n        if (\n          this.swap.getProvider(this.providerNames.simplex).currencies.fiat[\n            this.fromCurrency\n          ]\n        ) {\n          this.debounceUpdateEstimate(this.providerNames.simplex + direction);\n        } else {\n          this.debounceUpdateEstimate(direction);\n          const fromCur = this.fromCurrency;\n          const toCur = this.toCurrency;\n          const fromVal = this.fromValue;\n          this.debounceReviseRateEstimate(fromCur, toCur, fromVal, direction);\n        }\n      }\n    },\n    async updateEstimate(input) {\n      if (this.simplexUpdate) {\n        this.simplexUpdate = false;\n        return;\n      }\n\n      let fromValue, toValue, simplexProvider, simplexRateDetails;\n      switch (input) {\n        case 'to':\n          this.fromValue = this.swap.calculateFromValue(\n            this.toValue,\n            this.bestRate,\n            this.fromCurrency\n          );\n          break;\n        case 'from':\n          this.toValue = this.swap.calculateToValue(\n            this.fromValue,\n            this.bestRate,\n            this.toCurrency\n          );\n          break;\n        case `${this.providerNames.simplex}to`:\n          this.simplexUpdate = true;\n          simplexProvider = this.swap.getProvider(this.providerNames.simplex);\n\n          if (simplexProvider.canQuote(this.fromValue, this.toValue)) {\n            simplexRateDetails = await simplexProvider.updateDigital(\n              this.fromCurrency,\n              this.toCurrency,\n              this.toValue\n            );\n\n            this.fromValue = simplexRateDetails.fromValue;\n            this.toValue = simplexRateDetails.toValue;\n          } else {\n            simplexRateDetails = await simplexProvider.updateFiat(\n              this.fromCurrency,\n              this.toCurrency,\n              51\n            );\n\n            const rate = new BigNumber(simplexRateDetails.toValue)\n              .div(simplexRateDetails.fromValue)\n              .toString(10);\n\n            this.fromValue = this.swap.calculateFromValue(\n              this.toValue,\n              rate,\n              this.fromCurrency\n            );\n          }\n\n          break;\n        case `${this.providerNames.simplex}from`:\n          this.simplexUpdate = true;\n          simplexProvider = this.swap.getProvider(this.providerNames.simplex);\n          if (simplexProvider.canQuote(this.fromValue, this.toValue)) {\n            simplexRateDetails = await simplexProvider.updateFiat(\n              this.fromCurrency,\n              this.toCurrency,\n              this.fromValue\n            );\n\n            this.fromValue = simplexRateDetails.fromValue;\n            this.toValue = simplexRateDetails.toValue;\n          } else {\n            simplexRateDetails = await simplexProvider.updateFiat(\n              this.fromCurrency,\n              this.toCurrency,\n              51\n            );\n\n            const rate = new BigNumber(simplexRateDetails.toValue)\n              .div(simplexRateDetails.fromValue)\n              .toString(10);\n\n            this.toValue = this.swap.calculateToValue(this.fromValue, rate);\n          }\n\n          break;\n        default:\n          toValue = this.swap.calculateToValue(this.fromValue, this.bestRate);\n          fromValue = this.swap.calculateFromValue(this.toValue, this.bestRate);\n          this.toValue = toValue;\n          this.fromValue = fromValue;\n          break;\n      }\n    },\n    async updateRateEstimate(fromCurrency, toCurrency, fromValue, to) {\n      if (this.haveProviderRates) {\n        this.loadingData = true;\n        this.noProvidersPair = { fromCurrency, toCurrency };\n        this.selectedProvider = {}; // Reset the selected provider when new rate pair is choosen\n        this.providerData = [];\n        const {\n          providersFound,\n          callsToMake\n        } = await this.swap.updateRateEstimate(\n          fromCurrency,\n          toCurrency,\n          fromValue,\n          this.toValue\n        );\n        this.providersFound = providersFound;\n        const results = await Promise.all(\n          callsToMake.map(func =>\n            func(fromCurrency, toCurrency, fromValue, this.toValue)\n          )\n        );\n        this.loadingData = false;\n        if (\n          results.every(\n            entry =>\n              entry.fromCurrency === this.fromCurrency &&\n              entry.toCurrency === this.toCurrency\n          )\n        ) {\n          this.providerData = bestProviderForQuantity(\n            results.map(entry => {\n              if (+entry.rate > 0) {\n                return {\n                  provider: entry.provider,\n                  fromCurrency,\n                  fromValue: this.fromValue,\n                  toCurrency,\n                  rate: +entry.rate,\n                  minValue: entry.minValue || 0,\n                  maxValue: entry.maxValue || 0,\n                  computeConversion: function(_fromValue) {\n                    return new BigNumber(_fromValue)\n                      .times(this.rate)\n                      .toFixed(6)\n                      .toString(10);\n                  }\n                };\n              } else if (entry.provider === this.providerNames.changelly) {\n                Toast.responseHandler(\n                  `Failed to retrieve Changelly rate from ${fromCurrency} to ${toCurrency}`,\n                  3\n                );\n              }\n            }),\n            fromValue\n          );\n          this.updateEstimate(to);\n        }\n      }\n    },\n    async swapConfirmationModalOpen() {\n      try {\n        if (this.validSwap) {\n          this.finalizingSwap = true;\n          const providerDetails = this.providerList.find(entry => {\n            return entry.provider === this.selectedProvider.provider;\n          });\n          const swapDetails = {\n            providerDetails: providerDetails,\n            fromValue: this.fromValue,\n            toValue: this.toValue,\n            toAddress: this.toAddress || this.currentAddress,\n            fromAddress: this.currentAddress,\n            refundAddress: SwapProviders.isToken(providerDetails.fromCurrency)\n              ? this.currentAddress\n              : this.refundAddress,\n            exitFromAddress:\n              this.isExitToFiat && this.fromCurrency === this.baseCurrency\n                ? this.currentAddress\n                : this.exitFromAddress\n          };\n          this.swapDetails = await this.swap.startSwap(swapDetails);\n          this.finalizingSwap = false;\n\n          if (this.swapDetails.isExitToFiat) {\n            this.bityExitToFiat = true;\n            this.exitToFiatCallback = swapDetailsExit => {\n              this.bityExitToFiat = false;\n              this.swapDetails = swapDetailsExit;\n              this.openConfirmModal(this.swapDetails);\n            };\n          } else {\n            this.openConfirmModal(this.swapDetails);\n          }\n        }\n      } catch (e) {\n        //abort (empty response from provider or failure to finalize details)\n        if (e.message === 'abort') {\n          this.finalizingSwap = false;\n          return;\n        }\n        this.$refs.swapConfirmation.$refs.swapconfirmation.hide();\n        this.$refs.swapSendTo.$refs.swapconfirmation.hide();\n        this.finalizingSwap = false;\n        errorLogger(e);\n        Toast.responseHandler(e, false);\n      }\n    },\n    openConfirmModal(swapDetails) {\n      if (swapDetails.dataForInitialization && swapDetails.maybeToken) {\n        this.$refs.swapConfirmation.$refs.swapconfirmation.show();\n      } else if (swapDetails.dataForInitialization && !swapDetails.maybeToken) {\n        this.$refs.swapSendTo.$refs.swapconfirmation.show();\n      } else {\n        throw Error('Error while requesting finalized details from provider');\n      }\n    },\n    exitToFiatAbort() {\n      // get any component state values to temporarily persist, and reset swap state to state before exit to fiat selected.\n      this.bityExitToFiat = !this.bityExitToFiat;\n    },\n    resetSwapState() {\n      this.reset();\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import 'SwapContainer.scss';\n</style>\n"],"sourceRoot":"src/layouts/InterfaceLayout/containers/SwapContainer"}]}